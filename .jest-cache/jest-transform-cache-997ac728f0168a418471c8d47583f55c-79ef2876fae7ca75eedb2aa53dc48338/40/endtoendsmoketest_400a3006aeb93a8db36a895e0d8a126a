39e1414449a8faa90188f9662cec773b
/**
 * End-to-End Smoke Tests
 * Quick verification that the entire system can operate correctly
 */

const fs = require('fs');
const path = require('path');
const ExampleButton = require('../../fixtures/button-component-mock');
const MCPHelper = require('../../utils/mcp-helper');
describe('End-to-End Smoke Tests', () => {
  describe('Component Lifecycle Simulation', () => {
    let container;
    beforeEach(() => {
      container = document.createElement('div');
      container.id = 'smoke-test-container';
      document.body.appendChild(container);
    });
    afterEach(() => {
      document.body.removeChild(container);
    });
    test('should complete full component lifecycle', () => {
      // 1. Create component (simulates implementation)
      const button = new ExampleButton({
        label: 'Smoke Test Button',
        containerId: 'smoke-test-container'
      });
      expect(button).toBeDefined();
      expect(button.element).toBeInstanceOf(HTMLElement);

      // 2. Verify contract compliance (simulates Level 3 validation)
      const metadata = button.getMetadata();
      expect(metadata.name).toBe('example-button');
      expect(metadata.cssNamespace).toBe('component-example-button');

      // 3. Test functionality (simulates Level 2 validation)
      button.element.click();
      expect(button.getCount()).toBe(1);

      // 4. Clean up (simulates component destruction)
      button.destroy();
      expect(button.element).toBeNull();
    });
    test('should handle multiple components simultaneously', () => {
      // Simulate parallel component processing
      const components = [];
      for (let i = 0; i < 5; i++) {
        const testContainer = document.createElement('div');
        testContainer.id = `parallel-container-${i}`;
        document.body.appendChild(testContainer);
        const component = new ExampleButton({
          label: `Button ${i}`,
          containerId: `parallel-container-${i}`
        });
        components.push({
          component,
          container: testContainer
        });
      }

      // All components should be created successfully
      expect(components.length).toBe(5);
      components.forEach(({
        component
      }) => {
        expect(component.getCount()).toBe(0);
        component.element.click();
        expect(component.getCount()).toBe(1);
      });

      // Cleanup
      components.forEach(({
        component,
        container
      }) => {
        component.destroy();
        document.body.removeChild(container);
      });
    });
    test('should prevent CSS namespace conflicts', () => {
      const button = new ExampleButton({
        label: 'Test',
        containerId: 'smoke-test-container'
      });
      const classes = button.element.className.split(' ');

      // Verify no reserved classes
      expect(classes).not.toContain('btn');
      expect(classes).not.toContain('button');
      expect(classes).not.toContain('primary');

      // All classes should be namespaced
      classes.forEach(cls => {
        expect(cls).toMatch(/^component-example-button/);
      });
      button.destroy();
    });
  });
  describe('Contract → Implementation → Validation Flow', () => {
    test('should validate contract exists', () => {
      const contractPath = path.join(__dirname, '../../../.system/contracts/example-button-contract.md');
      expect(fs.existsSync(contractPath)).toBe(true);
      const content = fs.readFileSync(contractPath, 'utf8');
      expect(content).toContain('example-button');
    });
    test('should validate implementation matches contract', () => {
      const container = document.createElement('div');
      container.id = 'contract-test';
      document.body.appendChild(container);
      const button = new ExampleButton({
        label: 'Test',
        containerId: 'contract-test'
      });
      const metadata = button.getMetadata();

      // Check contract compliance
      expect(metadata).toHaveProperty('name');
      expect(metadata).toHaveProperty('cssNamespace');
      expect(metadata).toHaveProperty('jsAPI');
      expect(metadata).toHaveProperty('dependencies');

      // Verify API methods exist
      expect(typeof button.getCount).toBe('function');
      expect(typeof button.reset).toBe('function');
      expect(typeof button.destroy).toBe('function');
      button.destroy();
      document.body.removeChild(container);
    });
    test('should validate all 4 levels can pass', () => {
      const results = {
        level1: false,
        level2: false,
        level3: false,
        level4: false
      };

      // Level 1: Syntax
      const htmlValid = '<button>Test</button>'.match(/<button>.*<\/button>/);
      results.level1 = !!htmlValid;

      // Level 2: Unit Tests
      const container = document.createElement('div');
      container.id = 'level-test';
      document.body.appendChild(container);
      const button = new ExampleButton({
        label: 'Test',
        containerId: 'level-test'
      });
      results.level2 = button.getCount() === 0;

      // Level 3: Contract Compliance
      const metadata = button.getMetadata();
      results.level3 = metadata.cssNamespace === 'component-example-button';

      // Level 4: Integration Safety (metadata ready)
      results.level4 = Array.isArray(metadata.jsAPI) && Array.isArray(metadata.dependencies);
      button.destroy();
      document.body.removeChild(container);

      // All levels should pass
      expect(results.level1).toBe(true);
      expect(results.level2).toBe(true);
      expect(results.level3).toBe(true);
      expect(results.level4).toBe(true);
    });
  });
  describe('System Integration Points', () => {
    test('should have proper file system access', () => {
      const criticalPaths = ['../../../.system', '../../../.system/contracts', '../../../.system/components', '../../../tests', '../../../tests/unit', '../../../tests/integration'];
      criticalPaths.forEach(relPath => {
        const fullPath = path.join(__dirname, relPath);
        expect(fs.existsSync(fullPath)).toBe(true);
      });
    });
    test('should have all test utilities available', () => {
      const MCPHelper = require('../../utils/mcp-helper');
      const mcp = new MCPHelper();
      expect(mcp).toBeDefined();
      expect(typeof mcp.createMockComponent).toBe('function');
      expect(typeof mcp.registerComponent).toBe('function');
    });
    test('should have all test fixtures available', () => {
      const ExampleButton = require('../../fixtures/button-component-mock');
      expect(ExampleButton).toBeDefined();
      expect(typeof ExampleButton).toBe('function');
    });
  });
  describe('MCP Integration Readiness', () => {
    test('should be able to create MCP helper', () => {
      const mcp = new MCPHelper();
      expect(mcp).toBeDefined();
      expect(mcp.host).toBe('localhost');
      expect(mcp.port).toBe(3000);
    });
    test('should be able to create mock components for MCP', () => {
      const mcp = new MCPHelper();
      const mockComponent = mcp.createMockComponent('test-component', {
        cssNamespace: '.component-test-component-',
        jsAPI: ['TestComponent.init']
      });
      expect(mockComponent.name).toBe('test-component');
      expect(mockComponent.cssNamespace).toBe('.component-test-component-');
      expect(mockComponent.jsAPI).toEqual(['TestComponent.init']);
    });
    test('should gracefully handle MCP server absence', async () => {
      const mcp = new MCPHelper();
      const isRunning = await mcp.isServerRunning();

      // Should not throw, even if server is down
      expect(typeof isRunning).toBe('boolean');
    });
  });
  describe('Error Handling & Edge Cases', () => {
    test('should handle missing container gracefully', () => {
      expect(() => {
        new ExampleButton({
          label: 'Test',
          containerId: 'non-existent-container'
        });
      }).toThrow('Container #non-existent-container not found');
    });
    test('should handle missing required props', () => {
      expect(() => {
        new ExampleButton({
          containerId: 'test'
        });
      }).toThrow('label is required');
      expect(() => {
        new ExampleButton({
          label: 'Test'
        });
      }).toThrow('containerId is required');
    });
    test('should handle component cleanup properly', () => {
      const container = document.createElement('div');
      container.id = 'cleanup-test';
      document.body.appendChild(container);
      const button = new ExampleButton({
        label: 'Test',
        containerId: 'cleanup-test'
      });
      const element = button.element;
      expect(document.body.contains(element)).toBe(true);
      button.destroy();
      expect(button.element).toBeNull();
      expect(document.body.contains(element)).toBe(false);
      document.body.removeChild(container);
    });
  });
  describe('Performance Smoke Tests', () => {
    test('should create components quickly', () => {
      const startTime = Date.now();
      const container = document.createElement('div');
      container.id = 'perf-test';
      document.body.appendChild(container);
      for (let i = 0; i < 10; i++) {
        const button = new ExampleButton({
          label: `Button ${i}`,
          containerId: 'perf-test'
        });
        button.destroy();
      }
      const duration = Date.now() - startTime;
      expect(duration).toBeLessThan(1000); // Should complete in <1s

      document.body.removeChild(container);
    });
    test('should handle rapid clicks efficiently', () => {
      const container = document.createElement('div');
      container.id = 'click-perf-test';
      document.body.appendChild(container);
      const button = new ExampleButton({
        label: 'Click Test',
        containerId: 'click-perf-test'
      });
      const startTime = Date.now();

      // Simulate 100 rapid clicks
      for (let i = 0; i < 100; i++) {
        button.element.click();
      }
      const duration = Date.now() - startTime;
      expect(duration).toBeLessThan(500); // Should handle 100 clicks in <500ms
      expect(button.getCount()).toBe(100);
      button.destroy();
      document.body.removeChild(container);
    });
  });
  describe('Complete System Health Check', () => {
    test('should pass comprehensive health check', () => {
      const healthCheck = {
        fileSystem: false,
        contracts: false,
        testInfra: false,
        components: false,
        mcp: false
      };

      // File system check
      healthCheck.fileSystem = fs.existsSync(path.join(__dirname, '../../../.system'));

      // Contracts check
      const contractPath = path.join(__dirname, '../../../.system/contracts/example-button-contract.md');
      healthCheck.contracts = fs.existsSync(contractPath);

      // Test infrastructure check
      healthCheck.testInfra = fs.existsSync(path.join(__dirname, '../../unit')) && fs.existsSync(path.join(__dirname, '../../integration'));

      // Component creation check
      const container = document.createElement('div');
      container.id = 'health-check';
      document.body.appendChild(container);
      try {
        const button = new ExampleButton({
          label: 'Health',
          containerId: 'health-check'
        });
        healthCheck.components = button.getCount() === 0;
        button.destroy();
      } catch (error) {
        healthCheck.components = false;
      }
      document.body.removeChild(container);

      // MCP helper check
      try {
        const mcp = new MCPHelper();
        healthCheck.mcp = typeof mcp.createMockComponent === 'function';
      } catch (error) {
        healthCheck.mcp = false;
      }

      // All checks should pass
      expect(healthCheck.fileSystem).toBe(true);
      expect(healthCheck.contracts).toBe(true);
      expect(healthCheck.testInfra).toBe(true);
      expect(healthCheck.components).toBe(true);
      expect(healthCheck.mcp).toBe(true);

      // Summary
      const allPassing = Object.values(healthCheck).every(v => v === true);
      expect(allPassing).toBe(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiRXhhbXBsZUJ1dHRvbiIsIk1DUEhlbHBlciIsImRlc2NyaWJlIiwiY29udGFpbmVyIiwiYmVmb3JlRWFjaCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlkIiwiYm9keSIsImFwcGVuZENoaWxkIiwiYWZ0ZXJFYWNoIiwicmVtb3ZlQ2hpbGQiLCJ0ZXN0IiwiYnV0dG9uIiwibGFiZWwiLCJjb250YWluZXJJZCIsImV4cGVjdCIsInRvQmVEZWZpbmVkIiwiZWxlbWVudCIsInRvQmVJbnN0YW5jZU9mIiwiSFRNTEVsZW1lbnQiLCJtZXRhZGF0YSIsImdldE1ldGFkYXRhIiwibmFtZSIsInRvQmUiLCJjc3NOYW1lc3BhY2UiLCJjbGljayIsImdldENvdW50IiwiZGVzdHJveSIsInRvQmVOdWxsIiwiY29tcG9uZW50cyIsImkiLCJ0ZXN0Q29udGFpbmVyIiwiY29tcG9uZW50IiwicHVzaCIsImxlbmd0aCIsImZvckVhY2giLCJjbGFzc2VzIiwiY2xhc3NOYW1lIiwic3BsaXQiLCJub3QiLCJ0b0NvbnRhaW4iLCJjbHMiLCJ0b01hdGNoIiwiY29udHJhY3RQYXRoIiwiam9pbiIsIl9fZGlybmFtZSIsImV4aXN0c1N5bmMiLCJjb250ZW50IiwicmVhZEZpbGVTeW5jIiwidG9IYXZlUHJvcGVydHkiLCJyZXNldCIsInJlc3VsdHMiLCJsZXZlbDEiLCJsZXZlbDIiLCJsZXZlbDMiLCJsZXZlbDQiLCJodG1sVmFsaWQiLCJtYXRjaCIsIkFycmF5IiwiaXNBcnJheSIsImpzQVBJIiwiZGVwZW5kZW5jaWVzIiwiY3JpdGljYWxQYXRocyIsInJlbFBhdGgiLCJmdWxsUGF0aCIsIm1jcCIsImNyZWF0ZU1vY2tDb21wb25lbnQiLCJyZWdpc3RlckNvbXBvbmVudCIsImhvc3QiLCJwb3J0IiwibW9ja0NvbXBvbmVudCIsInRvRXF1YWwiLCJpc1J1bm5pbmciLCJpc1NlcnZlclJ1bm5pbmciLCJ0b1Rocm93IiwiY29udGFpbnMiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiZHVyYXRpb24iLCJ0b0JlTGVzc1RoYW4iLCJoZWFsdGhDaGVjayIsImZpbGVTeXN0ZW0iLCJjb250cmFjdHMiLCJ0ZXN0SW5mcmEiLCJlcnJvciIsImFsbFBhc3NpbmciLCJPYmplY3QiLCJ2YWx1ZXMiLCJldmVyeSIsInYiXSwic291cmNlcyI6WyJlbmQtdG8tZW5kLXNtb2tlLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmQtdG8tRW5kIFNtb2tlIFRlc3RzXG4gKiBRdWljayB2ZXJpZmljYXRpb24gdGhhdCB0aGUgZW50aXJlIHN5c3RlbSBjYW4gb3BlcmF0ZSBjb3JyZWN0bHlcbiAqL1xuXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgRXhhbXBsZUJ1dHRvbiA9IHJlcXVpcmUoJy4uLy4uL2ZpeHR1cmVzL2J1dHRvbi1jb21wb25lbnQtbW9jaycpO1xuY29uc3QgTUNQSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvbWNwLWhlbHBlcicpO1xuXG5kZXNjcmliZSgnRW5kLXRvLUVuZCBTbW9rZSBUZXN0cycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ0NvbXBvbmVudCBMaWZlY3ljbGUgU2ltdWxhdGlvbicsICgpID0+IHtcbiAgICBsZXQgY29udGFpbmVyO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNvbnRhaW5lci5pZCA9ICdzbW9rZS10ZXN0LWNvbnRhaW5lcic7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChjb250YWluZXIpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNvbXBsZXRlIGZ1bGwgY29tcG9uZW50IGxpZmVjeWNsZScsICgpID0+IHtcbiAgICAgIC8vIDEuIENyZWF0ZSBjb21wb25lbnQgKHNpbXVsYXRlcyBpbXBsZW1lbnRhdGlvbilcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IG5ldyBFeGFtcGxlQnV0dG9uKHtcbiAgICAgICAgbGFiZWw6ICdTbW9rZSBUZXN0IEJ1dHRvbicsXG4gICAgICAgIGNvbnRhaW5lcklkOiAnc21va2UtdGVzdC1jb250YWluZXInXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChidXR0b24uZWxlbWVudCkudG9CZUluc3RhbmNlT2YoSFRNTEVsZW1lbnQpO1xuXG4gICAgICAvLyAyLiBWZXJpZnkgY29udHJhY3QgY29tcGxpYW5jZSAoc2ltdWxhdGVzIExldmVsIDMgdmFsaWRhdGlvbilcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gYnV0dG9uLmdldE1ldGFkYXRhKCk7XG4gICAgICBleHBlY3QobWV0YWRhdGEubmFtZSkudG9CZSgnZXhhbXBsZS1idXR0b24nKTtcbiAgICAgIGV4cGVjdChtZXRhZGF0YS5jc3NOYW1lc3BhY2UpLnRvQmUoJ2NvbXBvbmVudC1leGFtcGxlLWJ1dHRvbicpO1xuXG4gICAgICAvLyAzLiBUZXN0IGZ1bmN0aW9uYWxpdHkgKHNpbXVsYXRlcyBMZXZlbCAyIHZhbGlkYXRpb24pXG4gICAgICBidXR0b24uZWxlbWVudC5jbGljaygpO1xuICAgICAgZXhwZWN0KGJ1dHRvbi5nZXRDb3VudCgpKS50b0JlKDEpO1xuXG4gICAgICAvLyA0LiBDbGVhbiB1cCAoc2ltdWxhdGVzIGNvbXBvbmVudCBkZXN0cnVjdGlvbilcbiAgICAgIGJ1dHRvbi5kZXN0cm95KCk7XG4gICAgICBleHBlY3QoYnV0dG9uLmVsZW1lbnQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGNvbXBvbmVudHMgc2ltdWx0YW5lb3VzbHknLCAoKSA9PiB7XG4gICAgICAvLyBTaW11bGF0ZSBwYXJhbGxlbCBjb21wb25lbnQgcHJvY2Vzc2luZ1xuICAgICAgY29uc3QgY29tcG9uZW50cyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBjb25zdCB0ZXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRlc3RDb250YWluZXIuaWQgPSBgcGFyYWxsZWwtY29udGFpbmVyLSR7aX1gO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlc3RDb250YWluZXIpO1xuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IG5ldyBFeGFtcGxlQnV0dG9uKHtcbiAgICAgICAgICBsYWJlbDogYEJ1dHRvbiAke2l9YCxcbiAgICAgICAgICBjb250YWluZXJJZDogYHBhcmFsbGVsLWNvbnRhaW5lci0ke2l9YFxuICAgICAgICB9KTtcblxuICAgICAgICBjb21wb25lbnRzLnB1c2goeyBjb21wb25lbnQsIGNvbnRhaW5lcjogdGVzdENvbnRhaW5lciB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQWxsIGNvbXBvbmVudHMgc2hvdWxkIGJlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAgICBleHBlY3QoY29tcG9uZW50cy5sZW5ndGgpLnRvQmUoNSk7XG5cbiAgICAgIGNvbXBvbmVudHMuZm9yRWFjaCgoeyBjb21wb25lbnQgfSkgPT4ge1xuICAgICAgICBleHBlY3QoY29tcG9uZW50LmdldENvdW50KCkpLnRvQmUoMCk7XG4gICAgICAgIGNvbXBvbmVudC5lbGVtZW50LmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChjb21wb25lbnQuZ2V0Q291bnQoKSkudG9CZSgxKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGVhbnVwXG4gICAgICBjb21wb25lbnRzLmZvckVhY2goKHsgY29tcG9uZW50LCBjb250YWluZXIgfSkgPT4ge1xuICAgICAgICBjb21wb25lbnQuZGVzdHJveSgpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcmV2ZW50IENTUyBuYW1lc3BhY2UgY29uZmxpY3RzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYnV0dG9uID0gbmV3IEV4YW1wbGVCdXR0b24oe1xuICAgICAgICBsYWJlbDogJ1Rlc3QnLFxuICAgICAgICBjb250YWluZXJJZDogJ3Ntb2tlLXRlc3QtY29udGFpbmVyJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNsYXNzZXMgPSBidXR0b24uZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgLy8gVmVyaWZ5IG5vIHJlc2VydmVkIGNsYXNzZXNcbiAgICAgIGV4cGVjdChjbGFzc2VzKS5ub3QudG9Db250YWluKCdidG4nKTtcbiAgICAgIGV4cGVjdChjbGFzc2VzKS5ub3QudG9Db250YWluKCdidXR0b24nKTtcbiAgICAgIGV4cGVjdChjbGFzc2VzKS5ub3QudG9Db250YWluKCdwcmltYXJ5Jyk7XG5cbiAgICAgIC8vIEFsbCBjbGFzc2VzIHNob3VsZCBiZSBuYW1lc3BhY2VkXG4gICAgICBjbGFzc2VzLmZvckVhY2goY2xzID0+IHtcbiAgICAgICAgZXhwZWN0KGNscykudG9NYXRjaCgvXmNvbXBvbmVudC1leGFtcGxlLWJ1dHRvbi8pO1xuICAgICAgfSk7XG5cbiAgICAgIGJ1dHRvbi5kZXN0cm95KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb250cmFjdCDihpIgSW1wbGVtZW50YXRpb24g4oaSIFZhbGlkYXRpb24gRmxvdycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgY29udHJhY3QgZXhpc3RzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJhY3RQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uLy4uLy5zeXN0ZW0vY29udHJhY3RzL2V4YW1wbGUtYnV0dG9uLWNvbnRyYWN0Lm1kJyk7XG4gICAgICBleHBlY3QoZnMuZXhpc3RzU3luYyhjb250cmFjdFBhdGgpKS50b0JlKHRydWUpO1xuXG4gICAgICBjb25zdCBjb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKGNvbnRyYWN0UGF0aCwgJ3V0ZjgnKTtcbiAgICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2V4YW1wbGUtYnV0dG9uJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgaW1wbGVtZW50YXRpb24gbWF0Y2hlcyBjb250cmFjdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLmlkID0gJ2NvbnRyYWN0LXRlc3QnO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgICBjb25zdCBidXR0b24gPSBuZXcgRXhhbXBsZUJ1dHRvbih7XG4gICAgICAgIGxhYmVsOiAnVGVzdCcsXG4gICAgICAgIGNvbnRhaW5lcklkOiAnY29udHJhY3QtdGVzdCdcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGJ1dHRvbi5nZXRNZXRhZGF0YSgpO1xuXG4gICAgICAvLyBDaGVjayBjb250cmFjdCBjb21wbGlhbmNlXG4gICAgICBleHBlY3QobWV0YWRhdGEpLnRvSGF2ZVByb3BlcnR5KCduYW1lJyk7XG4gICAgICBleHBlY3QobWV0YWRhdGEpLnRvSGF2ZVByb3BlcnR5KCdjc3NOYW1lc3BhY2UnKTtcbiAgICAgIGV4cGVjdChtZXRhZGF0YSkudG9IYXZlUHJvcGVydHkoJ2pzQVBJJyk7XG4gICAgICBleHBlY3QobWV0YWRhdGEpLnRvSGF2ZVByb3BlcnR5KCdkZXBlbmRlbmNpZXMnKTtcblxuICAgICAgLy8gVmVyaWZ5IEFQSSBtZXRob2RzIGV4aXN0XG4gICAgICBleHBlY3QodHlwZW9mIGJ1dHRvbi5nZXRDb3VudCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgYnV0dG9uLnJlc2V0KS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBidXR0b24uZGVzdHJveSkudG9CZSgnZnVuY3Rpb24nKTtcblxuICAgICAgYnV0dG9uLmRlc3Ryb3koKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBhbGwgNCBsZXZlbHMgY2FuIHBhc3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHRzID0ge1xuICAgICAgICBsZXZlbDE6IGZhbHNlLFxuICAgICAgICBsZXZlbDI6IGZhbHNlLFxuICAgICAgICBsZXZlbDM6IGZhbHNlLFxuICAgICAgICBsZXZlbDQ6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICAvLyBMZXZlbCAxOiBTeW50YXhcbiAgICAgIGNvbnN0IGh0bWxWYWxpZCA9ICc8YnV0dG9uPlRlc3Q8L2J1dHRvbj4nLm1hdGNoKC88YnV0dG9uPi4qPFxcL2J1dHRvbj4vKTtcbiAgICAgIHJlc3VsdHMubGV2ZWwxID0gISFodG1sVmFsaWQ7XG5cbiAgICAgIC8vIExldmVsIDI6IFVuaXQgVGVzdHNcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLmlkID0gJ2xldmVsLXRlc3QnO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgICBjb25zdCBidXR0b24gPSBuZXcgRXhhbXBsZUJ1dHRvbih7XG4gICAgICAgIGxhYmVsOiAnVGVzdCcsXG4gICAgICAgIGNvbnRhaW5lcklkOiAnbGV2ZWwtdGVzdCdcbiAgICAgIH0pO1xuXG4gICAgICByZXN1bHRzLmxldmVsMiA9IGJ1dHRvbi5nZXRDb3VudCgpID09PSAwO1xuXG4gICAgICAvLyBMZXZlbCAzOiBDb250cmFjdCBDb21wbGlhbmNlXG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGJ1dHRvbi5nZXRNZXRhZGF0YSgpO1xuICAgICAgcmVzdWx0cy5sZXZlbDMgPSBtZXRhZGF0YS5jc3NOYW1lc3BhY2UgPT09ICdjb21wb25lbnQtZXhhbXBsZS1idXR0b24nO1xuXG4gICAgICAvLyBMZXZlbCA0OiBJbnRlZ3JhdGlvbiBTYWZldHkgKG1ldGFkYXRhIHJlYWR5KVxuICAgICAgcmVzdWx0cy5sZXZlbDQgPSBBcnJheS5pc0FycmF5KG1ldGFkYXRhLmpzQVBJKSAmJiBBcnJheS5pc0FycmF5KG1ldGFkYXRhLmRlcGVuZGVuY2llcyk7XG5cbiAgICAgIGJ1dHRvbi5kZXN0cm95KCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgIC8vIEFsbCBsZXZlbHMgc2hvdWxkIHBhc3NcbiAgICAgIGV4cGVjdChyZXN1bHRzLmxldmVsMSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmxldmVsMikudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmxldmVsMykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmxldmVsNCkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N5c3RlbSBJbnRlZ3JhdGlvbiBQb2ludHMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgcHJvcGVyIGZpbGUgc3lzdGVtIGFjY2VzcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNyaXRpY2FsUGF0aHMgPSBbXG4gICAgICAgICcuLi8uLi8uLi8uc3lzdGVtJyxcbiAgICAgICAgJy4uLy4uLy4uLy5zeXN0ZW0vY29udHJhY3RzJyxcbiAgICAgICAgJy4uLy4uLy4uLy5zeXN0ZW0vY29tcG9uZW50cycsXG4gICAgICAgICcuLi8uLi8uLi90ZXN0cycsXG4gICAgICAgICcuLi8uLi8uLi90ZXN0cy91bml0JyxcbiAgICAgICAgJy4uLy4uLy4uL3Rlc3RzL2ludGVncmF0aW9uJ1xuICAgICAgXTtcblxuICAgICAgY3JpdGljYWxQYXRocy5mb3JFYWNoKHJlbFBhdGggPT4ge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsIHJlbFBhdGgpO1xuICAgICAgICBleHBlY3QoZnMuZXhpc3RzU3luYyhmdWxsUGF0aCkpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIGFsbCB0ZXN0IHV0aWxpdGllcyBhdmFpbGFibGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBNQ1BIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlscy9tY3AtaGVscGVyJyk7XG4gICAgICBjb25zdCBtY3AgPSBuZXcgTUNQSGVscGVyKCk7XG5cbiAgICAgIGV4cGVjdChtY3ApLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodHlwZW9mIG1jcC5jcmVhdGVNb2NrQ29tcG9uZW50KS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBtY3AucmVnaXN0ZXJDb21wb25lbnQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBhbGwgdGVzdCBmaXh0dXJlcyBhdmFpbGFibGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBFeGFtcGxlQnV0dG9uID0gcmVxdWlyZSgnLi4vLi4vZml4dHVyZXMvYnV0dG9uLWNvbXBvbmVudC1tb2NrJyk7XG5cbiAgICAgIGV4cGVjdChFeGFtcGxlQnV0dG9uKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBFeGFtcGxlQnV0dG9uKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTUNQIEludGVncmF0aW9uIFJlYWRpbmVzcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgYmUgYWJsZSB0byBjcmVhdGUgTUNQIGhlbHBlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IG1jcCA9IG5ldyBNQ1BIZWxwZXIoKTtcbiAgICAgIGV4cGVjdChtY3ApLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWNwLmhvc3QpLnRvQmUoJ2xvY2FsaG9zdCcpO1xuICAgICAgZXhwZWN0KG1jcC5wb3J0KS50b0JlKDMwMDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGJlIGFibGUgdG8gY3JlYXRlIG1vY2sgY29tcG9uZW50cyBmb3IgTUNQJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWNwID0gbmV3IE1DUEhlbHBlcigpO1xuICAgICAgY29uc3QgbW9ja0NvbXBvbmVudCA9IG1jcC5jcmVhdGVNb2NrQ29tcG9uZW50KCd0ZXN0LWNvbXBvbmVudCcsIHtcbiAgICAgICAgY3NzTmFtZXNwYWNlOiAnLmNvbXBvbmVudC10ZXN0LWNvbXBvbmVudC0nLFxuICAgICAgICBqc0FQSTogWydUZXN0Q29tcG9uZW50LmluaXQnXVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ29tcG9uZW50Lm5hbWUpLnRvQmUoJ3Rlc3QtY29tcG9uZW50Jyk7XG4gICAgICBleHBlY3QobW9ja0NvbXBvbmVudC5jc3NOYW1lc3BhY2UpLnRvQmUoJy5jb21wb25lbnQtdGVzdC1jb21wb25lbnQtJyk7XG4gICAgICBleHBlY3QobW9ja0NvbXBvbmVudC5qc0FQSSkudG9FcXVhbChbJ1Rlc3RDb21wb25lbnQuaW5pdCddKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBncmFjZWZ1bGx5IGhhbmRsZSBNQ1Agc2VydmVyIGFic2VuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtY3AgPSBuZXcgTUNQSGVscGVyKCk7XG4gICAgICBjb25zdCBpc1J1bm5pbmcgPSBhd2FpdCBtY3AuaXNTZXJ2ZXJSdW5uaW5nKCk7XG5cbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3csIGV2ZW4gaWYgc2VydmVyIGlzIGRvd25cbiAgICAgIGV4cGVjdCh0eXBlb2YgaXNSdW5uaW5nKS50b0JlKCdib29sZWFuJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZyAmIEVkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIGNvbnRhaW5lciBncmFjZWZ1bGx5JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgbmV3IEV4YW1wbGVCdXR0b24oe1xuICAgICAgICAgIGxhYmVsOiAnVGVzdCcsXG4gICAgICAgICAgY29udGFpbmVySWQ6ICdub24tZXhpc3RlbnQtY29udGFpbmVyJ1xuICAgICAgICB9KTtcbiAgICAgIH0pLnRvVGhyb3coJ0NvbnRhaW5lciAjbm9uLWV4aXN0ZW50LWNvbnRhaW5lciBub3QgZm91bmQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyByZXF1aXJlZCBwcm9wcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG5ldyBFeGFtcGxlQnV0dG9uKHtcbiAgICAgICAgICBjb250YWluZXJJZDogJ3Rlc3QnXG4gICAgICAgIH0pO1xuICAgICAgfSkudG9UaHJvdygnbGFiZWwgaXMgcmVxdWlyZWQnKTtcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgbmV3IEV4YW1wbGVCdXR0b24oe1xuICAgICAgICAgIGxhYmVsOiAnVGVzdCdcbiAgICAgICAgfSk7XG4gICAgICB9KS50b1Rocm93KCdjb250YWluZXJJZCBpcyByZXF1aXJlZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb21wb25lbnQgY2xlYW51cCBwcm9wZXJseScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLmlkID0gJ2NsZWFudXAtdGVzdCc7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgIGNvbnN0IGJ1dHRvbiA9IG5ldyBFeGFtcGxlQnV0dG9uKHtcbiAgICAgICAgbGFiZWw6ICdUZXN0JyxcbiAgICAgICAgY29udGFpbmVySWQ6ICdjbGVhbnVwLXRlc3QnXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZWxlbWVudCA9IGJ1dHRvbi5lbGVtZW50O1xuICAgICAgZXhwZWN0KGRvY3VtZW50LmJvZHkuY29udGFpbnMoZWxlbWVudCkpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIGJ1dHRvbi5kZXN0cm95KCk7XG4gICAgICBleHBlY3QoYnV0dG9uLmVsZW1lbnQpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QoZG9jdW1lbnQuYm9keS5jb250YWlucyhlbGVtZW50KSkudG9CZShmYWxzZSk7XG5cbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFNtb2tlIFRlc3RzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgY29tcG9uZW50cyBxdWlja2x5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLmlkID0gJ3BlcmYtdGVzdCc7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBjb25zdCBidXR0b24gPSBuZXcgRXhhbXBsZUJ1dHRvbih7XG4gICAgICAgICAgbGFiZWw6IGBCdXR0b24gJHtpfWAsXG4gICAgICAgICAgY29udGFpbmVySWQ6ICdwZXJmLXRlc3QnXG4gICAgICAgIH0pO1xuICAgICAgICBidXR0b24uZGVzdHJveSgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gU2hvdWxkIGNvbXBsZXRlIGluIDwxc1xuXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHJhcGlkIGNsaWNrcyBlZmZpY2llbnRseScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLmlkID0gJ2NsaWNrLXBlcmYtdGVzdCc7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgIGNvbnN0IGJ1dHRvbiA9IG5ldyBFeGFtcGxlQnV0dG9uKHtcbiAgICAgICAgbGFiZWw6ICdDbGljayBUZXN0JyxcbiAgICAgICAgY29udGFpbmVySWQ6ICdjbGljay1wZXJmLXRlc3QnXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gU2ltdWxhdGUgMTAwIHJhcGlkIGNsaWNrc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgICBidXR0b24uZWxlbWVudC5jbGljaygpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDApOyAvLyBTaG91bGQgaGFuZGxlIDEwMCBjbGlja3MgaW4gPDUwMG1zXG4gICAgICBleHBlY3QoYnV0dG9uLmdldENvdW50KCkpLnRvQmUoMTAwKTtcblxuICAgICAgYnV0dG9uLmRlc3Ryb3koKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbXBsZXRlIFN5c3RlbSBIZWFsdGggQ2hlY2snLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHBhc3MgY29tcHJlaGVuc2l2ZSBoZWFsdGggY2hlY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBoZWFsdGhDaGVjayA9IHtcbiAgICAgICAgZmlsZVN5c3RlbTogZmFsc2UsXG4gICAgICAgIGNvbnRyYWN0czogZmFsc2UsXG4gICAgICAgIHRlc3RJbmZyYTogZmFsc2UsXG4gICAgICAgIGNvbXBvbmVudHM6IGZhbHNlLFxuICAgICAgICBtY3A6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICAvLyBGaWxlIHN5c3RlbSBjaGVja1xuICAgICAgaGVhbHRoQ2hlY2suZmlsZVN5c3RlbSA9IGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uLy4uLy5zeXN0ZW0nKSk7XG5cbiAgICAgIC8vIENvbnRyYWN0cyBjaGVja1xuICAgICAgY29uc3QgY29udHJhY3RQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uLy4uLy5zeXN0ZW0vY29udHJhY3RzL2V4YW1wbGUtYnV0dG9uLWNvbnRyYWN0Lm1kJyk7XG4gICAgICBoZWFsdGhDaGVjay5jb250cmFjdHMgPSBmcy5leGlzdHNTeW5jKGNvbnRyYWN0UGF0aCk7XG5cbiAgICAgIC8vIFRlc3QgaW5mcmFzdHJ1Y3R1cmUgY2hlY2tcbiAgICAgIGhlYWx0aENoZWNrLnRlc3RJbmZyYSA9IGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uL3VuaXQnKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi8uLi9pbnRlZ3JhdGlvbicpKTtcblxuICAgICAgLy8gQ29tcG9uZW50IGNyZWF0aW9uIGNoZWNrXG4gICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNvbnRhaW5lci5pZCA9ICdoZWFsdGgtY2hlY2snO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBidXR0b24gPSBuZXcgRXhhbXBsZUJ1dHRvbih7XG4gICAgICAgICAgbGFiZWw6ICdIZWFsdGgnLFxuICAgICAgICAgIGNvbnRhaW5lcklkOiAnaGVhbHRoLWNoZWNrJ1xuICAgICAgICB9KTtcblxuICAgICAgICBoZWFsdGhDaGVjay5jb21wb25lbnRzID0gYnV0dG9uLmdldENvdW50KCkgPT09IDA7XG4gICAgICAgIGJ1dHRvbi5kZXN0cm95KCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBoZWFsdGhDaGVjay5jb21wb25lbnRzID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTtcblxuICAgICAgLy8gTUNQIGhlbHBlciBjaGVja1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWNwID0gbmV3IE1DUEhlbHBlcigpO1xuICAgICAgICBoZWFsdGhDaGVjay5tY3AgPSB0eXBlb2YgbWNwLmNyZWF0ZU1vY2tDb21wb25lbnQgPT09ICdmdW5jdGlvbic7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBoZWFsdGhDaGVjay5tY3AgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWxsIGNoZWNrcyBzaG91bGQgcGFzc1xuICAgICAgZXhwZWN0KGhlYWx0aENoZWNrLmZpbGVTeXN0ZW0pLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaGVhbHRoQ2hlY2suY29udHJhY3RzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGhlYWx0aENoZWNrLnRlc3RJbmZyYSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChoZWFsdGhDaGVjay5jb21wb25lbnRzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGhlYWx0aENoZWNrLm1jcCkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gU3VtbWFyeVxuICAgICAgY29uc3QgYWxsUGFzc2luZyA9IE9iamVjdC52YWx1ZXMoaGVhbHRoQ2hlY2spLmV2ZXJ5KHYgPT4gdiA9PT0gdHJ1ZSk7XG4gICAgICBleHBlY3QoYWxsUGFzc2luZykudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNRSxhQUFhLEdBQUdGLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQztBQUNyRSxNQUFNRyxTQUFTLEdBQUdILE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztBQUVuREksUUFBUSxDQUFDLHdCQUF3QixFQUFFLE1BQU07RUFDdkNBLFFBQVEsQ0FBQyxnQ0FBZ0MsRUFBRSxNQUFNO0lBQy9DLElBQUlDLFNBQVM7SUFFYkMsVUFBVSxDQUFDLE1BQU07TUFDZkQsU0FBUyxHQUFHRSxRQUFRLENBQUNDLGFBQWEsQ0FBQyxLQUFLLENBQUM7TUFDekNILFNBQVMsQ0FBQ0ksRUFBRSxHQUFHLHNCQUFzQjtNQUNyQ0YsUUFBUSxDQUFDRyxJQUFJLENBQUNDLFdBQVcsQ0FBQ04sU0FBUyxDQUFDO0lBQ3RDLENBQUMsQ0FBQztJQUVGTyxTQUFTLENBQUMsTUFBTTtNQUNkTCxRQUFRLENBQUNHLElBQUksQ0FBQ0csV0FBVyxDQUFDUixTQUFTLENBQUM7SUFDdEMsQ0FBQyxDQUFDO0lBRUZTLElBQUksQ0FBQywwQ0FBMEMsRUFBRSxNQUFNO01BQ3JEO01BQ0EsTUFBTUMsTUFBTSxHQUFHLElBQUliLGFBQWEsQ0FBQztRQUMvQmMsS0FBSyxFQUFFLG1CQUFtQjtRQUMx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UUFBUSxDQUFDRyxJQUFJLENBQUNDLFdBQVcsQ0FBQ04sU0FBUyxDQUFDO01BRXBDLElBQUk7UUFDRixNQUFNVSxNQUFNLEdBQUcsSUFBSWIsYUFBYSxDQUFDO1VBQy9CYyxLQUFLLEVBQUUsUUFBUTtVQUNmQyxXQUFXLEVBQUU7UUFDZixDQUFDLENBQUM7UUFFRm1FLFdBQVcsQ0FBQ3BELFVBQVUsR0FBR2pCLE1BQU0sQ0FBQ2MsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ2hEZCxNQUFNLENBQUNlLE9BQU8sQ0FBQyxDQUFDO01BQ2xCLENBQUMsQ0FBQyxPQUFPMEQsS0FBSyxFQUFFO1FBQ2RKLFdBQVcsQ0FBQ3BELFVBQVUsR0FBRyxLQUFLO01BQ2hDO01BRUF6QixRQUFRLENBQUNHLElBQUksQ0FBQ0csV0FBVyxDQUFDUixTQUFTLENBQUM7O01BRXBDO01BQ0EsSUFBSTtRQUNGLE1BQU0rRCxHQUFHLEdBQUcsSUFBSWpFLFNBQVMsQ0FBQyxDQUFDO1FBQzNCaUYsV0FBVyxDQUFDaEIsR0FBRyxHQUFHLE9BQU9BLEdBQUcsQ0FBQ0MsbUJBQW1CLEtBQUssVUFBVTtNQUNqRSxDQUFDLENBQUMsT0FBT21CLEtBQUssRUFBRTtRQUNkSixXQUFXLENBQUNoQixHQUFHLEdBQUcsS0FBSztNQUN6Qjs7TUFFQTtNQUNBbEQsTUFBTSxDQUFDa0UsV0FBVyxDQUFDQyxVQUFVLENBQUMsQ0FBQzNELElBQUksQ0FBQyxJQUFJLENBQUM7TUFDekNSLE1BQU0sQ0FBQ2tFLFdBQVcsQ0FBQ0UsU0FBUyxDQUFDLENBQUM1RCxJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3hDUixNQUFNLENBQUNrRSxXQUFXLENBQUNHLFNBQVMsQ0FBQyxDQUFDN0QsSUFBSSxDQUFDLElBQUksQ0FBQztNQUN4Q1IsTUFBTSxDQUFDa0UsV0FBVyxDQUFDcEQsVUFBVSxDQUFDLENBQUNOLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDekNSLE1BQU0sQ0FBQ2tFLFdBQVcsQ0FBQ2hCLEdBQUcsQ0FBQyxDQUFDMUMsSUFBSSxDQUFDLElBQUksQ0FBQzs7TUFFbEM7TUFDQSxNQUFNK0QsVUFBVSxHQUFHQyxNQUFNLENBQUNDLE1BQU0sQ0FBQ1AsV0FBVyxDQUFDLENBQUNRLEtBQUssQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLEtBQUssSUFBSSxDQUFDO01BQ3BFM0UsTUFBTSxDQUFDdUUsVUFBVSxDQUFDLENBQUMvRCxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQy9CLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==