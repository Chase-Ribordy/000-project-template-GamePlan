{"version":3,"names":["http","require","MCPHelper","constructor","host","port","baseUrl","request","tool","params","Promise","resolve","reject","data","JSON","stringify","options","hostname","path","method","headers","length","req","res","body","on","chunk","response","parse","error","Error","message","write","end","registerComponent","component","validateIntegration","componentName","getIntegrationPlan","listComponents","validateContract","contractPath","implementationPath","runPreflightChecks","testInSandbox","markAsProven","isServerRunning","waitForServer","timeout","interval","startTime","Date","now","setTimeout","createMockComponent","name","cssNamespace","jsAPI","dependencies","events","status","simulateConflict","component1","component2","result","module","exports"],"sources":["mcp-helper.js"],"sourcesContent":["/**\n * MCP Helper Utility\n * Provides helper functions for testing MCP server integration\n */\n\nconst http = require('http');\n\nclass MCPHelper {\n  constructor(host = 'localhost', port = 3000) {\n    this.host = host;\n    this.port = port;\n    this.baseUrl = `http://${host}:${port}`;\n  }\n\n  /**\n   * Make a request to the MCP server\n   */\n  async request(tool, params = {}) {\n    return new Promise((resolve, reject) => {\n      const data = JSON.stringify({ tool, params });\n\n      const options = {\n        hostname: this.host,\n        port: this.port,\n        path: '/mcp',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Content-Length': data.length\n        }\n      };\n\n      const req = http.request(options, (res) => {\n        let body = '';\n\n        res.on('data', (chunk) => {\n          body += chunk;\n        });\n\n        res.on('end', () => {\n          try {\n            const response = JSON.parse(body);\n            resolve(response);\n          } catch (error) {\n            reject(new Error(`Failed to parse MCP response: ${error.message}`));\n          }\n        });\n      });\n\n      req.on('error', (error) => {\n        reject(new Error(`MCP request failed: ${error.message}`));\n      });\n\n      req.write(data);\n      req.end();\n    });\n  }\n\n  /**\n   * Register a component with MCP\n   */\n  async registerComponent(component) {\n    return this.request('register_component', component);\n  }\n\n  /**\n   * Validate integration for a component\n   */\n  async validateIntegration(componentName) {\n    return this.request('validate_integration', { componentName });\n  }\n\n  /**\n   * Get integration plan\n   */\n  async getIntegrationPlan(componentName) {\n    return this.request('get_integration_plan', { componentName });\n  }\n\n  /**\n   * List all components\n   */\n  async listComponents() {\n    return this.request('list_components', {});\n  }\n\n  /**\n   * Validate contract\n   */\n  async validateContract(contractPath, implementationPath) {\n    return this.request('validate_contract', {\n      contractPath,\n      implementationPath\n    });\n  }\n\n  /**\n   * Run preflight checks\n   */\n  async runPreflightChecks(componentName) {\n    return this.request('run_preflight_checks', { componentName });\n  }\n\n  /**\n   * Test in sandbox\n   */\n  async testInSandbox(componentName) {\n    return this.request('test_in_sandbox', { componentName });\n  }\n\n  /**\n   * Mark component as proven\n   */\n  async markAsProven(componentName) {\n    return this.request('mark_as_proven', { componentName });\n  }\n\n  /**\n   * Check if MCP server is running\n   */\n  async isServerRunning() {\n    try {\n      await this.listComponents();\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Wait for MCP server to be ready\n   */\n  async waitForServer(timeout = 5000, interval = 100) {\n    const startTime = Date.now();\n\n    while (Date.now() - startTime < timeout) {\n      if (await this.isServerRunning()) {\n        return true;\n      }\n      await new Promise(resolve => setTimeout(resolve, interval));\n    }\n\n    throw new Error(`MCP server did not start within ${timeout}ms`);\n  }\n\n  /**\n   * Create mock component for testing\n   */\n  createMockComponent(name, options = {}) {\n    return {\n      name,\n      cssNamespace: options.cssNamespace || `.component-${name}-`,\n      jsAPI: options.jsAPI || [`${name}.init`, `${name}.destroy`],\n      dependencies: options.dependencies || [],\n      events: options.events || [],\n      status: options.status || 'development'\n    };\n  }\n\n  /**\n   * Simulate conflict scenario\n   */\n  async simulateConflict(component1, component2) {\n    await this.registerComponent(component1);\n    const result = await this.validateIntegration(component2.name);\n    return result;\n  }\n}\n\nmodule.exports = MCPHelper;\n"],"mappings":"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","ignoreList":[]}