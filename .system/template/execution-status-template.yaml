# Execution Status - Three-Pass Development Tracking
# This file tracks component-level progress through backend → component → polish workflow

# Metadata
generated: "{timestamp}"
project: "{project_name}"
sprint: "{sprint_name}"
execution_path: "standard-three-pass"  # Options: standard-three-pass, rapid-two-pass, polish-only

# Pass definitions (what each pass accomplishes)
pass_definitions:
  first-pass:
    name: "Backend-First (Get It Working)"
    goal: "Features work with minimal frontend"
    focus: "Functionality over aesthetics"
    completion_criteria:
      - "All story acceptance criteria met"
      - "Backend logic functional"
      - "Unit tests pass"
      - "Basic HTML structure exists"
      - "Data flows correctly"
    skills_active:
      - "environment-check"
    typical_commands:
      - "/dev-story"
      - "/first-pass (when implemented)"
    output_artifacts:
      - "Backend code in src/"
      - "Basic HTML templates"
      - "Unit tests"

  second-pass:
    name: "Component Integration (Make It Beautiful)"
    goal: "Beautiful, user-friendly interface"
    focus: "UI/UX and component quality"
    completion_criteria:
      - "All components validated (4 levels)"
      - "All components proven in sandbox"
      - "No CSS conflicts"
      - "Injection markers working"
      - "Responsive design implemented"
    skills_active:
      - "contract-creation"
      - "component-validation"
      - "sandbox-testing"
      - "component-integration"
      - "progress-reporter"
    typical_commands:
      - "/integrate"
      - "/second-pass (when implemented)"
    output_artifacts:
      - "Components in .system/proven/"
      - "Contracts in .system/contracts/"
      - "Integrated UI code"

  third-pass:
    name: "Debug & Polish (Production Ready)"
    goal: "Ship-quality code"
    focus: "Quality, performance, accessibility"
    completion_criteria:
      - "All tests pass (unit + integration)"
      - "CSS debugged and verified"
      - "Accessibility checks complete"
      - "Performance optimized"
      - "No console errors"
      - "Cross-browser tested"
    skills_active:
      - "component-validation"
    typical_commands:
      - "/debug-css"
      - "/quick-fix"
      - "/improve"
      - "/third-pass (when implemented)"
    output_artifacts:
      - "Bug fixes"
      - "Performance optimizations"
      - "Accessibility improvements"

# Story tracking by pass
# Format: story-{number}-{slug}
stories:
  # Example story (remove in actual use):
  # story-1-user-authentication:
  #   epic: "epic-1-user-management"
  #   title: "User Authentication"
  #   status: "second-pass-in-progress"  # Options: first-pass-pending, first-pass-in-progress, first-pass-complete, second-pass-in-progress, etc.
  #
  #   pass_status:
  #     first-pass:
  #       status: "completed"
  #       started_date: "2025-01-14T09:00:00Z"
  #       completed_date: "2025-01-14T15:30:00Z"
  #       artifacts:
  #         - "src/auth/login.js"
  #         - "src/auth/auth-service.js"
  #         - "templates/login.html"
  #       notes: "Backend complete, basic form created"
  #
  #     second-pass:
  #       status: "in-progress"
  #       started_date: "2025-01-15T10:00:00Z"
  #       components:
  #         - name: "login-form"
  #           status: "integrated"  # Options: draft, contract_defined, validated, proven, integrated
  #           contract: ".system/contracts/login-form-contract.md"
  #           validation_report: ".system/components/login-form/validation-report.md"
  #           sandbox: ".system/sandbox/login-form-test.html"
  #           proven_path: ".system/proven/login-form/"
  #           integrated_date: "2025-01-15T11:30:00Z"
  #
  #         - name: "password-input"
  #           status: "proven"
  #           contract: ".system/contracts/password-input-contract.md"
  #           validation_report: ".system/components/password-input/validation-report.md"
  #           sandbox: ".system/sandbox/password-input-test.html"
  #           proven_path: ".system/proven/password-input/"
  #
  #         - name: "submit-button"
  #           status: "validated"
  #           contract: ".system/contracts/submit-button-contract.md"
  #           validation_report: ".system/components/submit-button/validation-report.md"
  #           validation_issues: "Level 4 failed: CSS namespace conflict with existing .btn class"
  #
  #       total_components: 3
  #       components_integrated: 1
  #       components_proven: 1
  #       components_validated: 1
  #
  #     third-pass:
  #       status: "pending"

# Current execution state
current_state:
  current_pass: "first-pass"  # Which pass are we in
  current_story: null  # Which story is active (story-1-user-authentication)
  current_component: null  # Which component is being processed (if in second-pass)

  next_action:
    type: null  # Options: start-story, continue-pass, component-integration, debug, pass-transition
    command: null  # Suggested command to run next
    description: null  # What this action accomplishes

  blocked: false
  blocked_reason: null  # e.g., "story-1 has validation failures"

# Progress metrics (auto-calculated)
metrics:
  # Story-level metrics
  stories_total: 0
  stories_first_pass_complete: 0
  stories_second_pass_complete: 0
  stories_third_pass_complete: 0
  stories_fully_complete: 0

  # Component-level metrics (second-pass)
  components_total: 0
  components_contract_defined: 0
  components_validated: 0
  components_proven: 0
  components_integrated: 0

  # Quality metrics
  validation_failures: 0
  sandbox_failures: 0
  integration_conflicts: 0

  # Time tracking (optional)
  total_time_minutes: 0
  avg_component-integration_minutes: 0

# Event tracking (recent events for context)
recent_events:
  # Last 10 events are kept here for quick reference
  # Full event log is in .system/events/event-log.yaml
  #
  # - timestamp: "2025-01-15T14:23:45Z"
  #   event: "component_proven"
  #   component: "login-form"
  #   story: "story-1-user-authentication"

# Configuration
config:
  auto_update: true  # Allow skills to auto-update this file
  parallel_component_processing: true
  max_parallel_components: 5
  require_sandbox_approval: false  # Fully autonomous

# Notes and observations
notes: |
  Add any project-specific observations here:
  - Common validation issues
  - Performance bottlenecks
  - Integration patterns that work well
  - Things to remember for next story
